import{d as B,V as R,r as y,k as E,o as M,x as a,z as e,A as s,O as n,D as h,P as T,Q as V,M as A,y as r}from"./BzQlD_xP.js";import{u as I}from"./AebXkaNM.js";import{u as N}from"./CkUdmUOO.js";const P={class:"min-h-screen bg-gray-50 p-6"},S={class:"max-w-2xl mx-auto"},q={class:"flex items-center mb-6"},z={class:"text-2xl font-bold","data-testid":"heading-cards"},O={key:0,class:"flex justify-center items-center py-12","data-testid":"loading"},Q={class:"ml-2 text-gray-600"},G={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},H={key:2,class:"text-center text-gray-600"},J={key:3},K={class:"bg-white rounded-lg shadow p-6 mb-6"},U={class:"flex items-center justify-between gap-2 flex-wrap"},W={class:"text-lg font-medium"},X={key:0,class:"text-sm text-gray-500"},Y={key:1,class:"text-sm text-gray-500"},Z={class:"flex gap-2 flex-wrap"},ee=["disabled"],te={key:0,class:"text-center py-12","data-testid":"empty-state"},se={class:"text-gray-400 text-lg mb-2"},oe={class:"text-gray-500 text-sm"},ae={key:1,class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 justify-items-center"},re=["onClick"],ne={class:"w-full flex-1 flex flex-col items-center justify-center text-center overflow-hidden"},ie={class:"font-medium text-sm text-gray-900 mb-2 break-words line-clamp-3 leading-tight"},le={class:"text-xs text-gray-500 break-words line-clamp-4 leading-tight"},pe=B({name:"CollectionCardsPage",__name:"index",setup(de){const f=R(),x=A(),{collections:b,isLoading:m,error:w,loadCollections:_,getCollection:C}=I(),{cards:d,isLoading:k,error:$,loadCards:j,getLastCardDate:D}=N(),l=String(f.params.id),c=y(null),u=y(null),g=E(()=>w.value||$.value);async function p(){!b.value.length&&!m.value&&await _(),c.value=C(l),c.value&&(await j(l),u.value=D(l))}function L(t){x.push(`/collections/${l}/cards/${t}/edit`)}function F(t){return new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric"}).format(t)}return M(p),(t,o)=>{var v;return r(),a("div",P,[e("div",S,[e("div",q,[e("button",{class:"mr-4 text-gray-600 hover:text-gray-800","aria-label":"Retour",onClick:o[0]||(o[0]=i=>t.$router.push("/"))},[...o[3]||(o[3]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("h1",z,s(((v=c.value)==null?void 0:v.name)||"Collection"),1)]),n(m)||n(k)?(r(),a("div",O,[o[4]||(o[4]=e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)),e("span",Q,s(t.$t("common.loading")),1)])):g.value?(r(),a("div",G,[h(s(g.value)+" ",1),e("button",{class:"ml-2 underline",onClick:p},s(t.$t("common.retry")),1)])):c.value?(r(),a("div",J,[e("div",K,[e("div",U,[e("div",null,[e("p",W,s(n(d).length)+" "+s(n(d).length<=1?t.$t("cards.card"):t.$t("cards.cards")),1),u.value?(r(),a("p",X,s(t.$t("cards.lastAdded"))+" "+s(F(u.value)),1)):(r(),a("p",Y,s(t.$t("cards.noCards")),1))]),e("div",Z,[e("button",{class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition flex items-center gap-2","data-testid":"add-card-btn",onClick:o[1]||(o[1]=i=>t.$router.push(`/collections/${n(l)}/cards/create`))},[o[5]||(o[5]=e("span",{class:"text-xl"},"+",-1)),h(" "+s(t.$t("cards.addCard")),1)]),e("button",{class:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800 transition flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"review-collection-btn",disabled:n(d).length===0,onClick:o[2]||(o[2]=i=>t.$router.push(`/collections/${n(l)}/review`))},s(t.$t("review.reviewThisCollection")),9,ee)])])]),n(d).length===0?(r(),a("div",te,[e("div",se,s(t.$t("cards.noCards")),1),e("div",oe,s(t.$t("cards.addFirstCard")),1)])):(r(),a("div",ae,[(r(!0),a(T,null,V(n(d),i=>(r(),a("div",{key:i.id,class:"bg-white rounded-2xl shadow-lg transition cursor-pointer flex flex-col items-center justify-center aspect-[3/4] w-full max-w-56 h-72 p-4 border border-gray-200 relative","data-testid":"card-item",onClick:ce=>L(i.id)},[e("div",ne,[e("div",ie,s(i.question),1),o[6]||(o[6]=e("div",{class:"w-8 h-px bg-gray-300 my-2 opacity-50"},null,-1)),e("div",le,s(i.answer),1)])],8,re))),128))]))])):(r(),a("div",H,s(t.$t("collections.notFound")),1))])])}}});export{pe as default};
