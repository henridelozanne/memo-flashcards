import{R as E}from"./ChmgiqiM.js";import{d as C,x as c,y as n,z as e,A as a,r as l,k as p,o as A,M as F,B as R,C as I,T as z,N as L,_ as P}from"./BzQlD_xP.js";import{u as G}from"./CkUdmUOO.js";import{u as H}from"./DZ7_pMFF.js";import{u as J}from"./AebXkaNM.js";const K={class:"w-full max-w-md bg-white rounded-2xl shadow-lg p-8 text-center"},O={class:"text-2xl font-bold mb-2"},Q={class:"text-lg text-gray-700 mb-4"},U={class:"space-y-2 mb-6"},W={class:"text-sm text-gray-600"},X={class:"text-sm text-gray-600"},Y={key:0,class:"bg-green-100 text-green-800 px-3 py-2 rounded-lg"},Z={class:"font-semibold"},ee={class:"text-sm"},te={key:1,class:"bg-yellow-100 text-yellow-800 px-3 py-2 rounded-lg"},se={class:"font-semibold"},ae={class:"text-sm"},oe=C({__name:"DailyReviewEnd",props:{cardsReviewed:{type:Number,required:!0},successRate:{type:Number,required:!0},streakValidated:{type:Boolean,required:!0},currentStreak:{type:Number,required:!0}},emits:["back"],setup(r){function y(){return"Félicitations pour cette session !"}return(s,u)=>(n(),c("div",K,[e("div",O,a(s.$t("dailyReview.sessionFinished")),1),e("div",Q,a(y()),1),e("div",U,[e("div",W,a(s.$t("dailyReview.cardsReviewed",{count:r.cardsReviewed})),1),e("div",X,a(s.$t("dailyReview.successRate",{percent:r.successRate})),1),r.streakValidated?(n(),c("div",Y,[e("div",Z,a(s.$t("dailyReview.streakValidated")),1),e("div",ee,a(s.$t("dailyReview.currentStreak",{days:r.currentStreak})),1)])):(n(),c("div",te,[e("div",se,a(s.$t("dailyReview.streakNotValidated")),1),e("div",ae,a(s.$t("dailyReview.needMoreCards")),1)]))]),e("button",{class:"mt-6 px-6 py-2 rounded bg-gray-100 text-gray-700 text-base font-medium shadow-sm",onClick:u[0]||(u[0]=g=>s.$emit("back"))},a(s.$t("dailyReview.backToCollections")),1)]))}}),le={class:"min-h-screen bg-gray-50 flex flex-col"},ne={class:"flex items-center justify-between px-4 pt-4 pb-2"},re={class:"text-sm text-gray-600 font-semibold"},ie={class:"flex-1 flex flex-col items-center justify-center"},de=C({name:"DailyReviewPage",__name:"daily-review",setup(r){const y=F(),{getCardsDueToday:s,applyAnswer:u}=G(),{incrementTodayCards:g,validateTodayStreak:$,getCurrentStreakLength:B}=H(),{collections:S,loadCollections:N}=J(),i=l([]),d=l(0),w=l(!1),_=l(!1),h=l(0),v=l(0),V=[{value:"false",emoji:"❌",label:"review.again"},{value:"almost",emoji:"➖",label:"review.almost"},{value:"true",emoji:"✅",label:"review.good"}],m=p(()=>{const o=i.value[d.value];if(!o)return null;const t=S.value.find(f=>f.id===o.collection_id);return{...o,collection_name:(t==null?void 0:t.name)||"Collection"}}),j=p(()=>i.value.length),M=p(()=>v.value>0?Math.round(h.value/v.value*100):0),x=l(!1),b=l(0);function T(o){m.value&&(u(m.value,o),v.value+=1,g(),o==="true"&&(h.value+=1),w.value=!1,d.value<i.value.length-1?d.value+=1:(x.value=$(),b.value=B(),_.value=!0))}return A(async()=>{await N(),i.value=s(),i.value.length===0&&y.push("/")}),(o,t)=>{const f=E,D=oe;return n(),c("div",le,[e("div",ne,[e("button",{class:"text-gray-500 hover:text-gray-700","aria-label":"Retour",onClick:t[0]||(t[0]=k=>o.$router.push("/"))},[...t[3]||(t[3]=[e("svg",{class:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("div",re,a(d.value+1)+" / "+a(j.value),1)]),e("div",ie,[R(z,{name:"slide",mode:"out-in"},{default:I(()=>{var k;return[_.value?(n(),L(D,{key:"end","cards-reviewed":v.value,"success-rate":M.value,"streak-validated":x.value,"current-streak":b.value,onBack:t[2]||(t[2]=q=>o.$router.push("/"))},null,8,["cards-reviewed","success-rate","streak-validated","current-streak"])):(n(),c("div",{key:d.value,class:"w-full flex flex-col items-center"},[R(f,{"current-card":m.value,"show-back":w.value,responses:V,"collection-name":(k=m.value)==null?void 0:k.collection_name,onShowBack:t[1]||(t[1]=q=>w.value=!0),onAnswer:T},null,8,["current-card","show-back","collection-name"])]))]}),_:1})])])}}}),we=P(de,[["__scopeId","data-v-355d95a8"]]);export{we as default};
