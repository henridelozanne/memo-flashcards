import{d as B,U as C,r as m,k as _,W as h,x as b,z as l,X as x,K as p,A as r,Y as k,R as w,L as V,y as v}from"./BzQlD_xP.js";const F={class:"mb-6"},E={for:"front",class:"block text-sm font-medium text-gray-700 mb-2"},U=["placeholder"],q={key:0,class:"mt-1 text-sm text-red-600"},z={class:"mt-1 text-sm text-gray-500"},D={class:"mb-6"},M={for:"back",class:"block text-sm font-medium text-gray-700 mb-2"},N=["placeholder"],P={key:0,class:"mt-1 text-sm text-red-600"},j={class:"mt-1 text-sm text-gray-500"},I={class:"flex gap-3"},K=["disabled"],R=["disabled"],X=B({__name:"CardForm",props:{front:{default:""},back:{default:""},isSubmitting:{type:Boolean,default:!1},submitLabel:{default:"Ajouter"},showAddAnother:{type:Boolean,default:!1}},emits:["submit","addAnother","cancel"],setup(n,{expose:A,emit:$}){const{t:T}=C(),u=n,y=$,t=m(u.front??""),a=m(u.back??""),o=m(null),s=m(null);A({reset:()=>{t.value="",a.value="",o.value=null,s.value=null}});const i=_(()=>t.value.trim().length>0&&a.value.trim().length>0&&!o.value&&!s.value);function f(){const e=t.value.trim();if(!e&&t.value===""){o.value=null;return}e?e.length<2?o.value="Le recto doit contenir au moins 2 caractères":e.length>500?o.value="Le recto ne peut pas dépasser 500 caractères":o.value=null:o.value="Le recto est obligatoire"}function g(){const e=a.value.trim();if(!e&&a.value===""){s.value=null;return}e?e.length<2?s.value="Le verso doit contenir au moins 2 caractères":e.length>2e3?s.value="Le verso ne peut pas dépasser 2000 caractères":s.value=null:s.value="Le verso est obligatoire"}h(()=>t.value,f),h(()=>a.value,g);function L(){f(),g(),i.value&&y("submit",t.value.trim(),a.value.trim())}function S(){f(),g(),i.value&&y("addAnother",t.value.trim(),a.value.trim())}return h(()=>[u.front,u.back],()=>{t.value=u.front??"",a.value=u.back??""},{immediate:!0}),(e,d)=>(v(),b("form",{onSubmit:V(L,["prevent"])},[l("div",F,[l("label",E,r(e.$t("cards.front"))+" * ",1),x(l("input",{id:"front","onUpdate:modelValue":d[0]||(d[0]=c=>t.value=c),type:"text",required:"",maxlength:"500",class:w(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",{"border-red-500":o.value}]),placeholder:e.$t("cards.frontPlaceholder"),"data-testid":"front-input"},null,10,U),[[k,t.value]]),o.value?(v(),b("p",q,r(o.value),1)):p("",!0),l("p",z,r(t.value.length)+"/500 caractères",1)]),l("div",D,[l("label",M,r(e.$t("cards.back"))+" * ",1),x(l("textarea",{id:"back","onUpdate:modelValue":d[1]||(d[1]=c=>a.value=c),required:"",maxlength:"2000",rows:"4",class:w(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",{"border-red-500":s.value}]),placeholder:e.$t("cards.backPlaceholder"),"data-testid":"back-input"},null,10,N),[[k,a.value]]),s.value?(v(),b("p",P,r(s.value),1)):p("",!0),l("p",j,r(a.value.length)+"/2000 caractères",1)]),l("div",I,[l("button",{type:"button",class:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition",onClick:d[2]||(d[2]=c=>e.$emit("cancel"))},r(e.$t("common.cancel")),1),n.showAddAnother?(v(),b("button",{key:0,type:"button",disabled:n.isSubmitting||!i.value,class:"flex-1 px-4 py-2 text-blue-700 bg-blue-100 rounded-md hover:bg-blue-200 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed transition","data-testid":"add-card-another",onClick:S},r(n.isSubmitting?e.$t("common.loading"):e.$t("cards.addAnother")),9,K)):p("",!0),l("button",{type:"submit",disabled:n.isSubmitting||!i.value,class:"flex-1 px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition","data-testid":"add-card-submit"},r(n.isSubmitting?e.$t("common.loading"):n.submitLabel),9,R)])],32))}});export{X as _};
