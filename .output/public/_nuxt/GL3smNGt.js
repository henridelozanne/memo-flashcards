import{u as _}from"./AebXkaNM.js";import{u as S}from"./CkUdmUOO.js";import{u as D}from"./DZ7_pMFF.js";import{d as k,x as l,R as f,P as $,Q as R,y as i,k as c,r as g,o as h,z as r,K as w,A as u,B as C}from"./BzQlD_xP.js";const T=["title"],L=k({__name:"StreakCalendar",props:{days:{},streakDays:{},orientation:{}},setup(t){return(y,d)=>(i(),l("div",{class:f(t.orientation==="horizontal"?"flex flex-row gap-1":"flex flex-col gap-1")},[(i(!0),l($,null,R(t.days,o=>(i(),l("div",{key:o,title:o,class:f(["w-6 h-6 rounded border flex items-center justify-center",{"bg-blue-500 border-blue-600 text-white":t.streakDays.has(o),"bg-gray-200 border-gray-300":!t.streakDays.has(o)}])},null,10,T))),128))],2))}}),z=[{date:"2025-10-10",cardsReviewed:12},{date:"2025-10-11",cardsReviewed:15},{date:"2025-10-12",cardsReviewed:10}],B=[{response:"true"},{response:"true"},{response:"false"},{response:"true"},{response:"false"},{response:"true"},{response:"true"},{response:"true"},{response:"true"},{response:"true"}];async function N(){return await new Promise(t=>setTimeout(t,50)),z}async function P(){return await new Promise(t=>setTimeout(t,50)),B}const V={class:"min-h-screen bg-gray-50 p-6 flex flex-col gap-8"},I={class:"text-xl font-bold mb-2"},M={class:"flex items-center gap-3 mb-2"},O={key:0,class:"text-lg font-semibold text-blue-700"},j={key:0},A={class:"text-xl font-bold mb-2"},E={class:"text-base"},q=k({__name:"stats",setup(t){const{loadCollections:y}=_();S(),D();const d=c(()=>{const e=o.value,a=new Set(m.value.map(n=>n.date));let s=0;for(let n=e.length-1;n>=0&&a.has(e[n]);n--)s++;return s}),o=c(()=>{const e=[],a=new Date;for(let s=6;s>=0;s-=1){const n=new Date(a.getTime()-s*24*60*60*1e3);e.push(n.toISOString().split("T")[0])}return e}),m=g([]),b=c(()=>new Set(m.value.map(e=>e.date)));h(async()=>{await y(),m.value=await N()});const p=g([]);h(async()=>{p.value=await P()}),c(()=>{const e=p.value.length,a=p.value.filter(s=>s.response==="true").length;return e>0?`${Math.round(a/e*100)} %`:"--"});const x=new Date().toISOString().split("T")[0],v=c(()=>m.value.find(e=>e.date===x));return(e,a)=>(i(),l("div",V,[r("button",{class:"self-start mb-4 bg-gray-200 text-gray-700 rounded px-4 py-2 text-sm hover:bg-gray-300 transition",onClick:a[0]||(a[0]=s=>e.$router.push("/"))}," ← "+u(e.$t("common.back")),1),r("section",null,[r("h2",I,u(e.$t("stats.streakWeekTitle")),1),r("div",M,[d.value>0?(i(),l("span",O,u(e.$t("stats.currentStreak",d.value,{count:d.value})),1)):w("",!0)]),C(L,{days:o.value,"streak-days":b.value,orientation:"horizontal"},null,8,["days","streak-days"])]),v.value&&v.value.cardsReviewed>0?(i(),l("section",j,[r("h2",A,u(e.$t("stats.todayTitle")),1),r("div",E,u(e.$t("stats.cardsReviewedToday",v.value.cardsReviewed)),1)])):w("",!0)]))}});export{q as default};
