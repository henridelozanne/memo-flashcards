import{_ as w}from"./BF69E90-.js";import{d as $,U as B,r as c,x as l,z as s,K as S,A as a,O as i,D as V,B as E,R as N,V as R,M as T,y as r}from"./BzQlD_xP.js";import{u as j}from"./AebXkaNM.js";const z={class:"min-h-screen bg-gray-50 p-6"},D={class:"max-w-md mx-auto"},F={class:"flex items-center mb-6"},M={class:"text-2xl font-bold","data-testid":"heading-edit"},A={key:0,class:"flex justify-center items-center py-12"},I={class:"ml-2 text-gray-600"},K={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},L={key:2,class:"text-center text-gray-600"},O={key:3,class:"bg-white rounded-lg shadow p-6"},H=$({name:"CollectionsEditPage",__name:"edit",setup(P){const g=R(),d=T(),{t:m}=B(),{collections:f,isLoading:v,error:p,loadCollections:y,getCollection:x,updateCollection:_}=j(),o=c(null),u=c(!1),n=c(null);async function b(){n.value=null,!f.value.length&&!v.value&&await y();const t=String(g.params.id);o.value=x(t)}b();async function h(t){if(o.value){u.value=!0,n.value=null;try{await _(o.value.id,t),n.value={type:"success",text:m("collections.updatedSuccess")},setTimeout(()=>d.push("/"),1500)}catch(e){n.value={type:"error",text:e instanceof Error?e.message:m("collections.updatedError")}}finally{u.value=!1}}}return(t,e)=>{const k=w;return r(),l("div",z,[s("div",D,[s("div",F,[s("button",{class:"mr-4 text-gray-600 hover:text-gray-800","aria-label":"Retour",onClick:e[0]||(e[0]=C=>t.$router.back())},[...e[2]||(e[2]=[s("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),s("h1",M,a(t.$t("collections.editTitle")),1)]),!o.value&&i(v)?(r(),l("div",A,[e[3]||(e[3]=s("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)),s("span",I,a(t.$t("common.loading")),1)])):!o.value&&i(p)?(r(),l("div",K,[V(a(i(p))+" ",1),s("button",{class:"ml-2 underline",onClick:b},a(t.$t("common.retry")),1)])):o.value?(r(),l("div",O,[E(k,{name:o.value.name,"is-submitting":u.value,"submit-label":t.$t("common.save"),onSubmit:h,onCancel:e[1]||(e[1]=C=>i(d).back())},null,8,["name","is-submitting","submit-label"])])):(r(),l("div",L,a(t.$t("collections.notFound")),1)),n.value?(r(),l("div",{key:4,class:N(["mt-4 p-4 rounded-md",n.value.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},a(n.value.text),3)):S("",!0)])])}}});export{H as default};
